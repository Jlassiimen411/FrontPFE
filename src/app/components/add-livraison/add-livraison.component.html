<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajouter une Livraison</title>
</head>
<body>
  <div class="event-form">
    <h2>Ajouter une Livraison</h2>
    <form [formGroup]="addLivraisonForm" (ngSubmit)="addLivraison()">
      
      <!-- ID Livraison -->
      <label for="livraison-id">ID Livraison</label>
      <input type="text" id="livraison-id" formControlName="livraisonId" required>
      <div *ngIf="addLivraisonForm.get('livraisonId')?.invalid && addLivraisonForm.get('livraisonId')?.touched">
        <small style="color:red;">L'ID Livraison est requis.</small>
      </div>

      <!-- Commande Numéro -->
      <label for="commande-num">Numéro Commande</label>
      <select id="commande-num" formControlName="commandeId" required>
        <option *ngFor="let commande of commandes" [value]="commande.id">
          {{ commande.numero }}
        </option>
      </select>
      <div *ngIf="addLivraisonForm.get('commandeId')?.invalid && addLivraisonForm.get('commandeId')?.touched">
        <small style="color:red;">Le numéro de commande est requis.</small>
      </div>

      <!-- Date Livraison -->
      <label for="date-commande">Date Livraison</label>
      <input type="date" id="date" formControlName="date" required>
      <div *ngIf="addLivraisonForm.get('date')?.invalid && addLivraisonForm.get('date')?.touched">
        <small style="color:red;">La date de livraison est requise.</small>
      </div>

      <!-- Marque du Camion -->
      <label for="marque-camion">Marque du Camion</label>
      <select id="marque-camion" formControlName="marque" (change)="onMarqueSelectionChange($event)" required>
        <option *ngFor="let marque of marquesCamion" [value]="marque">
          {{ marque }}
        </option>
      </select>
      <div *ngIf="addLivraisonForm.get('marque')?.invalid && addLivraisonForm.get('marque')?.touched">
        <small style="color:red;">La marque du camion est requise.</small>
      </div>

      <!-- Immatriculation -->
      <label for="immatriculation">Immatriculation</label>
      <select id="immatriculation" formControlName="immatriculation" required>
        <option *ngFor="let immatriculation of immatriculations" [value]="immatriculation">
          {{ immatriculation }}
        </option>
      </select>
      <div *ngIf="addLivraisonForm.get('immatriculation')?.invalid && addLivraisonForm.get('immatriculation')?.touched">
        <small style="color:red;">L'immatriculation est requise.</small>
      </div>

      <!-- Statut -->
      <label for="statut">Statut</label>
      <select id="statut" formControlName="statut" required>
        <option value="EN_ATTENTE">En Attente</option>
        <option value="LIVRE">Livré</option>
        <option value="ANNULE">Annulé</option>
      </select>
      <div *ngIf="addLivraisonForm.get('statut')?.invalid && addLivraisonForm.get('statut')?.touched">
        <small style="color:red;">Le statut est requis.</small>
      </div>

      <!-- Boutons -->
      <button type="submit" class="btn btn-warning" [disabled]="addLivraisonForm.invalid"><b>Ajouter une Livraison</b></button>
      <button type="button" class="btn btn-warning" (click)="onCancel()"><b>Annuler</b></button>
    </form>
  </div>
</body>
</html>
